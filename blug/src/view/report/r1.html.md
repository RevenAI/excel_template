<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Report Card - Nigerian Secondary School</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'nigerian-green': '#008751',
                        'nigerian-green-dark': '#005732',
                        'nigerian-yellow': '#e5ae0c',
                    }
                }
            }
        }
    </script>
    <style>
        @media print {
            .no-print {
                display: none;
            }
            body {
                padding: 0;
                margin: 0;
            }
            .report-card {
                box-shadow: none;
                border: none;
            }
        }
        .student-info-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .section-divider {
            border-top: 2px solid #e5ae0c;
            position: relative;
        }
        .section-divider::after {
            content: "";
            position: absolute;
            top: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 4px;
            background: #008751;
            border-radius: 2px;
        }
        .domain-table {
            border-collapse: separate;
            border-spacing: 0;
        }
        .domain-table th {
            background: linear-gradient(135deg, #008751, #005732);
        }
        .grade-A1 { background-color: #e8f5e9; color: #2e7d32; font-weight: 600; }
        .grade-B2 { background-color: #f1f8e9; color: #689f38; font-weight: 600; }
        .grade-B3 { background-color: #f9fbe7; color: #afb42b; font-weight: 600; }
        .grade-C4 { background-color: #fffde7; color: #f9a825; font-weight: 600; }
        .grade-C5 { background-color: #fff3e0; color: #ef6c00; font-weight: 600; }
        .grade-D6 { background-color: #fbe9e7; color: #d84315; font-weight: 600; }
        .grade-E7 { background-color: #ffebee; color: #c62828; font-weight: 600; }
        .grade-F9 { background-color: #f3e5f5; color: #7b1fa2; font-weight: 600; }
    </style>
</head>
<body class="bg-gray-100 p-5 text-gray-800">
    <!-- Print Button -->
    <div class="no-print max-w-4xl mx-auto mb-4">
        <button onclick="window.print()" class="bg-nigerian-green hover:bg-nigerian-green-dark text-white font-bold py-2 px-4 rounded flex items-center shadow-md">
            <i class="fas fa-print mr-2"></i> Print Report Card
        </button>
    </div>

    <div class="report-card max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200">
        <!-- Header -->
        <div class="bg-gradient-to-r from-nigerian-green to-nigerian-green-dark text-white p-6 flex flex-col md:flex-row justify-between items-center border-b-4 border-nigerian-yellow">
            <div class="mb-4 md:mb-0">
                <h1 class="text-2xl md:text-3xl font-bold">{{schoolName}}</h1>
                <p class="italic mt-1 opacity-90">{{reportTitle}}</p>
                <p class="text-sm mt-2">{{schoolAdrees}}</p>
            </div>
            <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center border-4 border-nigerian-yellow text-nigerian-green text-3xl font-bold shadow-lg">
                {{getInitials schoolName}}
            </div>
        </div>

        <!-- Report Title -->
        <div class="bg-gray-50 py-4 text-center border-b border-gray-200 relative">
            <div class="section-divider pt-2"></div>
            <h2 class="text-xl md:text-2xl font-bold text-nigerian-green-dark">STUDENT'S REPORT CARD</h2>
            <p class="text-gray-600 mt-1">{{reportSession}} - {{reportTerm}}</p>
        </div>

        <!-- Enhanced Student Information -->
        <div class="p-6">
            <div class="student-info-card rounded-xl p-5 mb-4">
                <div class="flex flex-col md:flex-row">
                    <div class="flex-1">
                        <h3 class="text-lg font-bold text-nigerian-green-dark mb-4 pb-2 border-b border-nigerian-yellow flex items-center">
                            <i class="fas fa-user-graduate mr-2"></i> STUDENT INFORMATION
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center p-3 rounded-lg border border-gray-100 bg-white shadow-sm">
                                <div class="w-10 h-10 rounded-full bg-nigerian-green flex items-center justify-center mr-3">
                                    <i class="fas fa-user text-white text-sm"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 font-semibold">STUDENT NAME</div>
                                    <div class="font-bold text-nigerian-green-dark">{{studentName}}</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center p-3 rounded-lg border border-gray-100 bg-white shadow-sm">
                                <div class="w-10 h-10 rounded-full bg-nigerian-green flex items-center justify-center mr-3">
                                    <i class="fas fa-venus-mars text-white text-sm"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 font-semibold">GENDER</div>
                                    <div class="font-bold text-nigerian-green-dark">{{sex}}</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center p-3 rounded-lg border border-gray-100 bg-white shadow-sm">
                                <div class="w-10 h-10 rounded-full bg-nigerian-green flex items-center justify-center mr-3">
                                    <i class="fas fa-users text-white text-sm"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 font-semibold">CLASS</div>
                                    <div class="font-bold text-nigerian-green-dark">{{class}}</div>
                                </div>
                            </div>
                            
                            <div class="flex items-center p-3 rounded-lg border border-gray-100 bg-white shadow-sm">
                                <div class="w-10 h-10 rounded-full bg-nigerian-green flex items-center justify-center mr-3">
                                    <i class="fas fa-graduation-cap text-white text-sm"></i>
                                </div>
                                <div>
                                    <div class="text-xs text-gray-500 font-semibold">SESSION</div>
                                    <div class="font-bold text-nigerian-green-dark">{{reportSession}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 md:mt-0 md:ml-6 flex flex-col items-center justify-center border-l border-gray-200 pl-6">
                        <div class="w-32 h-40 bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-gray-300 rounded-lg mx-auto flex items-center justify-center text-gray-500 text-sm shadow-inner mb-4">
                            <div class="text-center">
                                <i class="fas fa-user text-4xl mb-2 block text-gray-400"></i>
                                <span>STUDENT PHOTO</span>
                            </div>
                        </div>
                        <div class="text-center mt-2">
                            <p class="text-sm font-medium">Signature:</p>
                            <div class="h-0.5 w-32 bg-gray-400 mt-1 mx-auto"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Attendance Information -->
            <div class="student-info-card rounded-xl p-5">
                <h3 class="text-lg font-bold text-nigerian-green-dark mb-4 pb-2 border-b border-nigerian-yellow flex items-center">
                    <i class="fas fa-calendar-alt mr-2"></i> ATTENDANCE RECORD
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="flex flex-col items-center p-4 rounded-lg border border-gray-100 bg-white shadow-sm text-center">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-2">
                            <i class="fas fa-door-open text-blue-600"></i>
                        </div>
                        <div class="text-xs text-gray-500 font-semibold">SCHOOL OPENED</div>
                        <div class="font-bold text-nigerian-green-dark">{{numOfTimeSchoolOpenned}} Days</div>
                    </div>
                    
                    <div class="flex flex-col items-center p-4 rounded-lg border border-gray-100 bg-white shadow-sm text-center">
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-2">
                            <i class="fas fa-calendar-check text-green-600"></i>
                        </div>
                        <div class="text-xs text-gray-500 font-semibold">DAYS PRESENT</div>
                        <div class="font-bold text-nigerian-green-dark text-xl">{{numOfTimeStudentPresent}} Days</div>
                    </div>
                    
                    <div class="flex flex-col items-center p-4 rounded-lg border border-gray-100 bg-white shadow-sm text-center">
                        <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-2">
                            <i class="fas fa-user-clock text-purple-600"></i>
                        </div>
                        <div class="text-xs text-gray-500 font-semibold">ATTENDANCE RATE</div>
                        <div class="font-bold text-nigerian-green-dark text-xl">{{calculateAttendancePercentage numOfTimeStudentPresent numOfTimeSchoolOpenned}}%</div>
                    </div>
                </div>
                
                <!-- Attendance Details -->
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center mr-3">
                                <i class="fas fa-check text-white"></i>
                            </div>
                            <div>
                                <div class="text-sm text-gray-600">Days Present</div>
                                <div class="font-bold text-green-700 text-lg">{{numOfTimeStudentPresent}} Days</div>
                            </div>
                        </div>
                        <div class="text-green-500 text-2xl font-bold">âœ“</div>
                    </div>
                    
                    <div class="flex justify-between items-center p-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-100">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center mr-3">
                                <i class="fas fa-times text-white"></i>
                            </div>
                            <div>
                                <div class="text-sm text-gray-600">Days Absent</div>
                                <div class="font-bold text-amber-700 text-lg">{{numOfTimeStudentAbsent}} Days</div>
                            </div>
                        </div>
                        <div class="text-amber-500 text-2xl font-bold">!</div>
                    </div>

                    <div class="flex justify-between items-center p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-100">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center mr-3">
                                <i class="fas fa-calendar text-white"></i>
                            </div>
                            <div>
                                <div class="text-sm text-gray-600">School Days</div>
                                <div class="font-bold text-blue-700 text-lg">{{numOfTimeSchoolOpenned}} Days</div>
                            </div>
                        </div>
                        <div class="text-blue-500 text-2xl font-bold">ðŸ“…</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Academic Performance -->
        <div class="p-6">
            <h3 class="text-xl font-bold text-nigerian-green-dark mb-4 pb-2 border-b-2 border-nigerian-yellow">ACADEMIC PERFORMANCE</h3>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm border border-gray-300">
                    <thead>
                        <tr class="bg-nigerian-green text-white">
                            <th class="p-3 text-left border border-gray-300">SUBJECT</th>
                            <th class="p-3 text-left border border-gray-300">CONTINUOUS ASSESSMENT</th>
                            <th class="p-3 text-left border border-gray-300">TOTAL SCORE</th>
                            <th class="p-3 text-left border border-gray-300">GRADE</th>
                            <th class="p-3 text-left border border-gray-300">REMARKS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each subjects}}
                        <tr class="even:bg-gray-50">
                            <td class="p-3 border border-gray-300 font-semibold">{{this.subjectName}}</td>
                            <td class="p-3 border border-gray-300">
                                {{#each this.scores}}
                                <div class="flex justify-between text-xs">
                                    <span>{{this.name}}:</span>
                                    <span class="font-medium">{{this.value}}/{{this.maxValue}}</span>
                                </div>
                                {{/each}}
                            </td>
                            <td class="p-3 border border-gray-300 font-bold">{{this.totalScore}}</td>
                            <td class="p-3 border border-gray-300 font-semibold grade-{{this.grade}}">{{this.grade}}</td>
                            <td class="p-3 border border-gray-300">{{this.remark}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Psychomotor Domain -->
        {{#if psychomotorSkills.items.length}}
        <div class="p-6">
            <h3 class="text-xl font-bold text-nigerian-green-dark mb-4 pb-2 border-b-2 border-nigerian-yellow">PSYCHOMOTOR DOMAIN ASSESSMENT</h3>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm border border-gray-300 domain-table">
                    <thead>
                        <tr class="text-white">
                            <th class="p-3 text-left border border-gray-300">SKILL AREA</th>
                            {{#each psychomotorSkills.items.[0].rating}}
                            <th class="p-3 text-center border border-gray-300">{{this.rate}}</th>
                            {{/each}}
                            <th class="p-3 text-left border border-gray-300">REMARKS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each psychomotorSkills.items}}
                        <tr class="even:bg-gray-50">
                            <td class="p-3 border border-gray-300 font-semibold">{{this.label}}</td>
                            {{#each this.rating}}
                            <td class="p-3 border border-gray-300 text-center">
                                {{#if this.value}}
                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center mx-auto">
                                    âœ“
                                </div>
                                {{else}}
                                <div class="w-6 h-6 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center mx-auto">
                                    -
                                </div>
                                {{/if}}
                            </td>
                            {{/each}}
                            <td class="p-3 border border-gray-300">{{this.remark}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            
            <div class="mt-4 text-sm text-gray-600">
                <p><strong>Rating Scale:</strong> 5 = Excellent, 4 = Very Good, 3 = Good, 2 = Fair, 1 = Poor</p>
            </div>
        </div>
        {{/if}}

        <!-- Affective Domain -->
        {{#if affectiveDomain.items.length}}
        <div class="p-6">
            <h3 class="text-xl font-bold text-nigerian-green-dark mb-4 pb-2 border-b-2 border-nigerian-yellow">AFFECTIVE DOMAIN ASSESSMENT</h3>
            
            <div class="overflow-x-auto">
                <table class="w-full text-sm border border-gray-300 domain-table">
                    <thead>
                        <tr class="text-white">
                            <th class="p-3 text-left border border-gray-300">CHARACTER TRAIT</th>
                            {{#each affectiveDomain.items.[0].rating}}
                            <th class="p-3 text-center border border-gray-300">{{this.rate}}</th>
                            {{/each}}
                            <th class="p-3 text-left border border-gray-300">REMARKS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each affectiveDomain.items}}
                        <tr class="even:bg-gray-50">
                            <td class="p-3 border border-gray-300 font-semibold">{{this.label}}</td>
                            {{#each this.rating}}
                            <td class="p-3 border border-gray-300 text-center">
                                {{#if this.value}}
                                <div class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center mx-auto">
                                    âœ“
                                </div>
                                {{else}}
                                <div class="w-6 h-6 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center mx-auto">
                                    -
                                </div>
                                {{/if}}
                            </td>
                            {{/each}}
                            <td class="p-3 border border-gray-300">{{this.remark}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
            
            <div class="mt-4 text-sm text-gray-600">
                <p><strong>Rating Scale:</strong> 5 = Excellent, 4 = Very Good, 3 = Good, 2 = Fair, 1 = Poor</p>
            </div>
        </div>
        {{/if}}

        <!-- Summary Section -->
        <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Academic Summary -->
            <div class="md:col-span-2 bg-gray-50 rounded-lg p-4 border-l-4 border-nigerian-green">
                <h4 class="text-lg font-bold text-nigerian-green-dark mb-4">ACADEMIC SUMMARY</h4>
                <div class="space-y-3">
                    <div class="flex justify-between border-b border-dashed border-gray-300 pb-2">
                        <span class="font-semibold">Total Marks Obtainable:</span>
                        <span class="font-bold text-nigerian-green-dark">{{totolMarkObtainable}}</span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-300 pb-2">
                        <span class="font-semibold">Total Marks Obtained:</span>
                        <span class="font-bold text-nigerian-green-dark">{{totalMarkObtained}}</span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-300 pb-2">
                        <span class="font-semibold">Percentage:</span>
                        <span class="font-bold text-nigerian-green-dark">{{percentage}}%</span>
                    </div>
                    <div class="flex justify-between border-b border-dashed border-gray-300 pb-2">
                        <span class="font-semibold">Average Score:</span>
                        <span class="font-bold text-nigerian-green-dark">{{calculateAverage totalMarkObtained subjects.length}}</span>
                    </div>
                </div>
            </div>

            <!-- Grading System -->
            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                <h4 class="text-lg font-bold text-nigerian-green-dark mb-4">GRADING SYSTEM</h4>
                <div class="overflow-x-auto">
                    <table class="w-full text-xs border border-gray-300">
                        <thead>
                            <tr class="bg-gray-200">
                                <th class="p-2 text-left border border-gray-300">Grade</th>
                                <th class="p-2 text-left border border-gray-300">Percentage</th>
                                <th class="p-2 text-left border border-gray-300">Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each gradeInterpretation}}
                            <tr class="even:bg-gray-100">
                                <td class="p-2 border border-gray-300 font-semibold grade-{{this.grade}}">{{this.grade}}</td>
                                <td class="p-2 border border-gray-300">{{this.minPercentage}}% - {{this.maxPercentage}}%</td>
                                <td class="p-2 border border-gray-300">{{this.remark}}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Comments Section -->
        <div class="p-6">
            <h3 class="text-xl font-bold text-nigerian-green-dark mb-4 pb-2 border-b-2 border-nigerian-yellow">COMMENTS</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <h4 class="text-lg font-bold text-nigerian-green-dark mb-2">Class Teacher's Remarks</h4>
                    <p class="text-gray-700 min-h-24">
                        {{#if commentsAndSignatures.teacherComment}}
                            {{commentsAndSignatures.teacherComment}}
                        {{else}}
                            No teacher comments available.
                        {{/if}}
                    </p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <h4 class="text-lg font-bold text-nigerian-green-dark mb-2">Principal's Remarks</h4>
                    <p class="text-gray-700 min-h-24">
                        {{#if commentsAndSignatures.headTeacherComment}}
                            {{commentsAndSignatures.headTeacherComment}}
                        {{else}}
                            No principal comments available.
                        {{/if}}
                    </p>
                </div>
            </div>
        </div>

        <!-- Signature Area -->
        <div class="p-6 border-t-2 border-dashed border-gray-300 mt-4 flex flex-col md:flex-row justify-between">
            <div class="text-center mb-6 md:mb-0">
                <p>Class Teacher's Signature</p>
                <div class="mt-16 border-t border-gray-800 pt-1">
                    ___________________
                </div>
            </div>
            <div class="text-center mb-6 md:mb-0">
                <p>Principal's Signature</p>
                <div class="mt-16 border-t border-gray-800 pt-1">
                    ___________________
                </div>
            </div>
            <div class="text-center">
                <p>Parent/Guardian's Signature</p>
                <div class="mt-16 border-t border-gray-800 pt-1">Date: ___________________</div>
            </div>
        </div>

        <!-- Footer -->
        <div class="bg-gray-50 py-4 text-center border-t border-gray-200">
            <p class="text-gray-700">{{schoolName}} - Report Card</p>
            <p class="text-gray-500 text-sm mt-1">{{reportTerm}} - {{reportSession}}</p>
            <p class="text-gray-500 text-sm mt-1">This report is based on the Nigerian Grading System for Secondary Schools</p>
        </div>
    </div>
</body>
</html>